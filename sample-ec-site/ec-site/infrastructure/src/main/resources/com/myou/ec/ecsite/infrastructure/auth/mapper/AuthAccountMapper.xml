<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.myou.ec.ecsite.infrastructure.auth.mapper.AuthAccountMapper">

    <select id="selectByAccountId" resultType="com.myou.ec.ecsite.infrastructure.auth.record.AuthAccountRecord">
        SELECT
            auth_account_id AS authAccountId,
            user_id         AS userId,
            password_hash   AS passwordHash,
            enabled,
            deleted,
            created_at      AS createdAt,
            created_by      AS createdBy,
            updated_at      AS updatedAt,
            updated_by      AS updatedBy,
            deleted_at      AS deletedAt,
            deleted_by      AS deletedBy
        FROM auth_account
        WHERE auth_account_id = #{authAccountId}
    </select>

    <select id="selectByUserId" resultType="com.myou.ec.ecsite.infrastructure.auth.record.AuthAccountRecord">
        SELECT
            auth_account_id AS authAccountId,
            user_id         AS userId,
            password_hash   AS passwordHash,
            enabled,
            deleted,
            created_at      AS createdAt,
            created_by      AS createdBy,
            updated_at      AS updatedAt,
            updated_by      AS updatedBy,
            deleted_at      AS deletedAt,
            deleted_by      AS deletedBy
        FROM auth_account
        WHERE user_id = #{userId}
    </select>

    <insert id="insert"
            parameterType="com.myou.ec.ecsite.infrastructure.auth.record.AuthAccountRecord"
            useGeneratedKeys="true"
            keyProperty="authAccountId">
        INSERT INTO auth_account (user_id, password_hash,
                                  enabled, deleted,
                                  created_at, created_by,
                                  updated_at, updated_by)
        VALUES (#{userId}, #{passwordHash},
                #{enabled}, #{deleted},
                #{createdAt}, #{createdBy},
                #{updatedAt}, #{updatedBy})
    </insert>

    <update id="update"
            parameterType="com.myou.ec.ecsite.infrastructure.auth.record.AuthAccountRecord">
        UPDATE AUTH_ACCOUNT
        SET user_id       = #{userId},
            password_hash = #{loginPassword},
            enabled       = #{enabled},
            deleted       = #{deleted},
            created_at    = #{createdAt},
            created_by    = #{createdBy},
            updated_at    = #{updatedAt},
            updated_by    = #{updatedBy},
            deleted_at    = #{deletedAt},
            deleted_by    = #{deletedBy}
        WHERE AUTH_ACCOUNT_ID = #{authAccountId}
    </update>

</mapper>
